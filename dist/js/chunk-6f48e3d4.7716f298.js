(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6f48e3d4"],{"29cd":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-card",{attrs:{rounded:"0"}},[a("v-data-table",{staticClass:"elevation-1 rounded-t",attrs:{headers:e.headers,items:e.livros,"items-per-page":e.pageSize,loading:e.loading,search:e.search,"hide-default-footer":""},scopedSlots:e._u([{key:"top",fn:function(){return[a("v-toolbar",{staticClass:"blue-grey darken-3 rounded-t",attrs:{flat:""}},[a("v-toolbar-title",{staticClass:"white--text"},[e._v("Livros")]),a("v-divider",{staticClass:"mx-4 white",attrs:{inset:"",vertical:""}}),a("v-text-field",{staticClass:"white--text",attrs:{"append-icon":"mdi-magnify",label:"Procurar...","single-line":"","hide-details":"",dark:""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"500px"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,o=t.attrs;return[a("v-btn",e._g(e._b({staticClass:"mb-2",attrs:{color:"blue-grey",dark:""}},"v-btn",o,!1),i),[e._v(" Novo Livro ")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"blue-grey darken-3"},[a("span",{staticClass:"text-h5 white--text"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-form",{ref:"form"},[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Nome",rules:[e.rules.required,e.rules.counterMin,e.rules.counterMax40],outlined:"",hint:"Digite o nome do livro",counter:"40",color:"blue-grey"},model:{value:e.livro.nome,callback:function(t){e.$set(e.livro,"nome",t)},expression:"livro.nome"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Autor",rules:[e.rules.required,e.rules.counterMin,e.rules.counterMax40],outlined:"",hint:"Digite o autor do livro",counter:"40",color:"blue-grey"},model:{value:e.livro.autor,callback:function(t){e.$set(e.livro,"autor",t)},expression:"livro.autor"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:e.editoras,"item-text":"nome","item-value":"id",rules:[e.rules.required],label:"Escolha uma editora",outlined:"",color:"blue-grey","item-color":"blue-grey"},scopedSlots:e._u([{key:"selection",fn:function(t){return[e._v(" "+e._s(t.item.id)+" - "+e._s(t.item.nome)+" ")]}},{key:"item",fn:function(t){return[e._v(" "+e._s(t.item.id)+" - "+e._s(t.item.nome)+" ")]}}]),model:{value:e.livro.editoraId,callback:function(t){e.$set(e.livro,"editoraId",t)},expression:"livro.editoraId"}})],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,o=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Lançamento","append-icon":"mdi-calendar",readonly:"",outlined:"",rules:[e.rules.required],hint:"Selecione a data de lançamento",color:"blue-grey"},on:{blur:function(t){e.date=e.parseDate(e.dateFormatted)}},model:{value:e.livro.lancamento,callback:function(t){e.$set(e.livro,"lancamento",t)},expression:"livro.lancamento"}},"v-text-field",o,!1),i))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:"",max:e.todayDate,color:"blue-grey"},on:{input:function(t){e.menu=!1}},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1)],1)],1),a("v-row",[a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{label:"Quantidade",outlined:"",hint:"Digite a quantidade do(e) livro(s)",rules:[e.rules.required,e.rules.requiredNumber],color:"blue-grey"},model:{value:e.livro.quantidade,callback:function(t){e.$set(e.livro,"quantidade",t)},expression:"livro.quantidade"}})],1)],1)],1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.close}},[e._v(" Cancelar ")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.save}},[e._v(" Salvar ")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}},[a("v-card",[a("v-card-title",{staticClass:"text-h5"},[e._v("Você realmente deseja excluir esse item?")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.closeDelete}},[e._v("Cancelar")]),a("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:e.deleteItemConfirm}},[e._v("Confirmar")]),a("v-spacer")],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var i=t.item;return[a("v-icon",{staticClass:"mr-2",attrs:{size:"20"},on:{click:function(t){return e.editItem(i)}}},[e._v(" mdi-pencil ")]),a("v-icon",{attrs:{size:"20"},on:{click:function(t){return e.deleteItem(i)}}},[e._v(" mdi-delete ")])]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v(" Reset ")])]},proxy:!0}],null,!0)})],1),a("v-divider"),a("v-card",{attrs:{color:"blue-grey darken-3 rounded-b",rounded:"0"}},[a("v-col",{attrs:{cols:"12"}},[a("v-row",[a("v-col",{attrs:{cols:"4",sm:"4"}},[a("v-select",{attrs:{items:e.pageSizes,label:"Items por Página","item-color":"blue-grey",color:"white",dark:"",outlined:""},on:{change:e.handlePageSizeChange},model:{value:e.pageSize,callback:function(t){e.pageSize=t},expression:"pageSize"}})],1),a("v-col",{attrs:{cols:"12",sm:"8"}},[a("v-pagination",{attrs:{length:e.totalPages,"total-visible":"7","next-icon":"mdi-menu-right","prev-icon":"mdi-menu-left",color:"blue-grey"},on:{input:e.handlePageChange},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)],1)],1)],1)],1)},o=[],l=a("9249"),r=a("7937"),s={name:"App",data:()=>({dialog:!1,dialogDelete:!1,loading:!0,menu:!1,search:"",livros:[],editoras:[],totallivros:0,page:1,totalPages:0,pageSize:5,pageSizes:[5,10,15],todayDate:(new Date).toISOString().slice(0,10),date:"",dateFormatted:"",livro:{id:null,nome:"",autor:"",lancamento:"",quantidade:"",editora:{id:"",nome:"",cidade:""},editoraId:""},headers:[{text:"ID",align:"start",sortable:!0,value:"id"},{text:"Nome",value:"nome"},{text:"Autor",value:"autor"},{text:"Editora",value:"editora.nome"},{text:"Lacamento",value:"lancamento"},{text:"Quantidade",value:"quantidade"},{text:"Ações",value:"actions",sortable:!1}],rules:{required:e=>!!e||"Campo obrigatório",counterMin:e=>e&&e.length>=3||"No mínimo 3 caracteres",counterMax40:e=>e&&e.length<=40||"No máximo 40 caracteres",requiredEditora:e=>void 0==e||"Escolha uma editora",requiredNumber:e=>!isNaN(e)||"Somente caracteres numéricos"}}),computed:{formTitle(){return this.livro.id?"Editar livro":"Novo livro"}},watch:{dialog(e){e||this.close()},dialogDelete(e){e||this.closeDelete()},date(e){this.livro.lancamento=this.formatDate(this.date)}},created(){this.initialize(),this.findAllEditoras()},methods:{initialize(){this.loading=!0;const e=this.getRequestParams(this.page,this.pageSize);l["a"].findAll(e).then(e=>{const{totalElements:t,content:a,totalPages:i}=e.data;this.livros=a,this.totallivros=t,this.totalPages=i,this.loading=!1})},getRequestParams(e,t){let a={};return e&&(a["page"]=e-1),t&&(a["size"]=t),a},handlePageChange(e){this.page=e,this.initialize()},handlePageSizeChange(e){this.pageSize=e,this.page=1,this.initialize()},editItem(e){this.livro.id=e.id,this.livro.nome=e.nome,this.livro.autor=e.autor,this.livro.quantidade=e.quantidade,this.livro.lancamento=e.lancamento,this.livro.editora=e.editora,this.livro.editoraId=e.editora.id,this.dialog=!0},deleteItem(e){this.livro={...e},this.dialogDelete=!0},deleteItemConfirm(){l["a"].delete(this.livro.id).then(()=>{Toast.fire("Livro deletado com sucesso","","success"),this.livro={},this.initialize()}).catch(e=>{this.$swal("Livro não pode ser deletado","Esse livro está vinculado a um aluguel","error")}),this.dialogDelete=!1},close(){this.dialog=!1,this.$refs.form.resetValidation(),this.dialog||(this.livro={})},closeDelete(){this.dialogDelete=!1},save(){this.$refs.form.validate()&&(this.livro.id?l["a"].update(this.livro).then(()=>{Toast.fire("Livro alterado com sucesso","","success"),this.livro={},this.initialize()}):l["a"].save(this.livro).then(()=>{Toast.fire("Livro cadastrado com sucesso","","success"),this.livro={},this.initialize()}),this.livro={},this.close())},findAllEditoras(){r["a"].findAllNotPaged().then(e=>{this.editoras=e.data})},formatDate(e){if(!e)return null;const[t,a,i]=e.split("-");return`${i}-${a}-${t}`},parseDate(e){if(!e)return null;const[t,a,i]=e.split("/");return`${i}-${t.padStart(2,"0")}-${a.padStart(2,"0")}`}}},n=s,d=a("2877"),c=a("6544"),u=a.n(c),v=a("8336"),m=a("b0af"),h=a("99d9"),g=a("62ad"),p=a("a523"),f=a("8fea"),b=a("2e4b"),x=a("169a"),k=a("ce7e"),y=a("4bd4"),_=a("132d"),C=a("e449"),D=a("891e"),w=a("0fd9"),S=a("b974"),V=a("2fa4"),z=a("8654"),q=a("71d9"),P=a("2a7f"),I=Object(d["a"])(n,i,o,!1,null,null,null);t["default"]=I.exports;u()(I,{VBtn:v["a"],VCard:m["a"],VCardActions:h["a"],VCardText:h["b"],VCardTitle:h["c"],VCol:g["a"],VContainer:p["a"],VDataTable:f["a"],VDatePicker:b["a"],VDialog:x["a"],VDivider:k["a"],VForm:y["a"],VIcon:_["a"],VMenu:C["a"],VPagination:D["a"],VRow:w["a"],VSelect:S["a"],VSpacer:V["a"],VTextField:z["a"],VToolbar:q["a"],VToolbarTitle:P["a"]})},7937:function(e,t,a){"use strict";var i=a("6a0b");t["a"]={findAll:e=>i["a"].get("/editoras",{params:e}),findAllNotPaged:()=>i["a"].get("/editoras/all"),save:e=>i["a"].post("/editoras",e),update:e=>i["a"].put("/editoras",e),delete:e=>i["a"].delete("/editoras/"+e)}},9249:function(e,t,a){"use strict";var i=a("6a0b");t["a"]={findAll:e=>i["a"].get("/livros",{params:e}),findAllNotPaged:()=>i["a"].get("/livros/all"),save:e=>i["a"].post("/livros",e),update:e=>i["a"].put("/livros",e),delete:e=>i["a"].delete("/livros/"+e)}}}]);
//# sourceMappingURL=chunk-6f48e3d4.7716f298.js.map